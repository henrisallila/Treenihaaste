<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>Treenihaaste</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #0f0f0f;
      --card: #1b1b1b;
      --card-soft: #242424;
      --accent: #4caf50;
      --text: #eaeaea;
      --muted: #9a9a9a;
      --danger: #e57373;
    }

    body {
      margin: 0;
      padding: 20px;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .container {
      max-width: 520px;
      margin: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 24px;
    }

    h2 {
      margin: 28px 0 12px;
      color: var(--accent);
      font-size: 18px;
    }

    .day {
      background: var(--card);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      transition: transform 0.15s ease;
    }

    .day.today {
      border: 2px solid var(--accent);
      background: linear-gradient(180deg, #1c2b20, var(--card));
    }

    .day.future {
      opacity: 0.45;
    }

    .day.done {
      background: var(--card-soft);
      opacity: 0.75;
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .badge {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #333;
      color: var(--muted);
    }

    .badge.today {
      background: var(--accent);
      color: #000;
    }

    .exercise {
      margin: 4px 0;
      font-size: 16px;
    }

    .rest {
      font-style: italic;
      color: var(--muted);
    }

    .actions {
      margin-top: 12px;
      display: flex;
      gap: 10px;
    }

    button {
      flex: 1;
      padding: 12px;
      font-size: 15px;
      border-radius: 12px;
      border: none;
      font-weight: bold;
    }

    .do-btn {
      background: var(--accent);
      color: #000;
    }

    .undo-btn {
      background: transparent;
      border: 2px solid var(--danger);
      color: var(--danger);
    }

    button:disabled {
      opacity: 0.5;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ðŸ’ª 3 viikon treenihaaste</h1>
  <div id="list"></div>
</div>

<script>
  const startDate = new Date("2026-01-08");
  const MS_PER_DAY = 1000 * 60 * 60 * 24;

  const plan = [
    { p: 5, a: 10 }, { p: 6, a: 12 }, null,
    { p: 7, a: 15 }, { p: 8, a: 18 }, null,
    { p: 9, a: 20 },

    { p: 10, a: 22 }, { p: 12, a: 25 }, null,
    { p: 14, a: 28 }, { p: 16, a: 32 }, null,
    { p: 18, a: 35 },

    { p: 20, a: 38 }, { p: 22, a: 42 }, null,
    { p: 25, a: 45 }, { p: 28, a: 50 }, null,
    { p: 30, a: 60 }
  ];

  const todayIndex = Math.floor((new Date() - startDate) / MS_PER_DAY);
  const list = document.getElementById("list");

  function weekForDay(i) {
    return Math.floor(i / 7) + 1;
  }

  function render() {
    list.innerHTML = "";
    let currentWeek = 0;

    plan.forEach((day, i) => {
      const week = weekForDay(i);
      if (week !== currentWeek) {
        currentWeek = week;
        const h = document.createElement("h2");
        h.textContent = `Viikko ${week}`;
        list.appendChild(h);
      }

      const div = document.createElement("div");
      div.className = "day";

      const key = "done-day-" + i;
      const done = localStorage.getItem(key);
      const isToday = i === todayIndex;
      const isFuture = i > todayIndex;

      if (isToday) div.classList.add("today");
      if (isFuture) div.classList.add("future");
      if (done) div.classList.add("done");

      let badge = "";
      if (isToday) badge = `<span class="badge today">TÃ„NÃ„Ã„N</span>`;
      else if (done) badge = `<span class="badge">SUORITETTU</span>`;
      else badge = `<span class="badge">PÃ¤ivÃ¤ ${i + 1}</span>`;

      let html = `
        <div class="day-header">
          <div>PÃ¤ivÃ¤ ${i + 1}</div>
          ${badge}
        </div>
      `;

      if (day === null) {
        html += `<div class="rest">ðŸ˜´ LepopÃ¤ivÃ¤</div>`;
      } else {
        html += `
          <div class="exercise">Punnerrukset: <strong>${day.p}</strong></div>
          <div class="exercise">Vatsat: <strong>${day.a}</strong></div>
        `;

        if (!isFuture) {
          html += `<div class="actions">`;

          if (!done && isToday) {
            html += `<button class="do-btn" onclick="complete(${i})">SUORITA!</button>`;
          }

          if (done) {
            html += `<button class="undo-btn" onclick="undo(${i})">POISTA SUORITUS</button>`;
          }

          html += `</div>`;
        }
      }

      div.innerHTML = html;
      list.appendChild(div);
    });
  }

  function complete(i) {
    localStorage.setItem("done-day-" + i, "true");
    render();
  }

  function undo(i) {
    localStorage.removeItem("done-day-" + i);
    render();
  }

  render();
</script>

</body>
</html>
